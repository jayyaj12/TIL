
## 멀티코어란 ? 
 - 하나의 CPU 안에 여러 개의 처리장치(core)가 있는 구조. 
 - 하드웨어가 동시에 여러 작업을 처리할 수 있는 능력
 - EX) 4코어 CPU 는 동시에 4개의 일을 처리할 수 있다. 
 
 ## 멀티코어의 처리 방식
 물리적으로 코어가 여러 개 있어서 실제로 여러 작업을 병렬로 처리할 수 있다.
 ```
 코어1 -> 스레드1
 코어2 -> 스레드2
 코어3 -> 스레드3
 코어4 -> 스레드4
 ```
## 멀티쓰레드란 ?  
 - 하나의 프로그램(프로세스) 안에서 여러 개의 작업 흐름(스레드)가 동시에 실행되는 구조.
 - 하나의 프로그램이 동시에 여러 작업을 처리하도록 만드는 기술

## 멀티쓰레드의 처리 방식
한 프로그램 안에서 여러 개의 스레드를 만들어 동시처럼 보이게 처리하는 것 
<br>아래와 같이 자바 프로그램에서 2개의 스레들르 만들면 OS 와 JVM 이 시간을 쪼개서(시분할) 스레드를 빠르게 번갈아 실행한다. 
```
시간 0~1ms : 스레드1 실행
시간 1~2ms : 스레드2 실행
시간 2~3ms : 다시 스레드1 실행 ...
```

## 싱글코어 + 멀티쓰레드 동작 방식 
- CPU 는 한번에 딱 하나의 스레드만 실행이 가능하다.
- 근데 CPU 가 엄청 빠르게 빠르게 스레드1 → 스레드2 → 스레드3 → 스레드1... 이렇게 바꿔가며 실행하니까 우리 눈엔 동시에 돌아가는 것처럼 보인다.
- 따라서 싱글코어 + 멀티쓰레드 방식은 병렬이 아닌 동시 처리 방식이다. 

## 멀티코어 + 멀티쓰레드 동작 방식
- CPU에 코어가 4개가 있다면 최대 4개의 스레드를 동시에 실행할 수 있다.
- 자바 프로그램이 만든 여러 스레드를 운영체제와 JVM 이 알아서 코어에 배정한다.
- 그래서 실제 병렬로도 돌고, 남은 스레드는 시분할 방식으로 처리한다. 

## 자바 스레드 실행 흐름  
1. 자바 프로그램에서 `new Thread()`를 하면 JVM 내부에서 스레드를 만들고 관리한다. 
2. OS 로 실행 요청한다.
3. OS 스케줄러가 요청 받은 스레드를 어느 코어에서 언제 실행할지 결정한다. 

## OS 스케줄러가 스레드를 선택하고, 어떤 CPU 코어에 배정할지 결정하는 방식
아래 4가지 기준에 따라 결정한다.<br>
- **우선순위**: 중요한 작업일수록 먼저 실행한다.
- **준비상태**: 실행할 준비가 된 스레드 위주로 실행한다.
- **CPU 부하**: 바쁜 코어보다 한가한 코어에 배정한다. 
- **캐시 최적화**: 이전에 실행됐던 코어에 다시 배정한다.(캐시 히트율을 높이기 위함)

\* 캐시 히트율: 컴퓨터에서 데이터를 얼마나 효율적으로 불러오고 있느냐를 나타내는 개념 